{"version":3,"sources":["../../src/routes/index.js"],"names":["router","get","ctx","title","render","updateMock","mockArray","map","item","type","toLowerCase","url","body","fs","watchFile","path","join","process","cwd"],"mappings":"uSAAA,wB;AACA,uC;AACA,iD;AACA,wD;AACA,4B;;AAEA,IAAMA,SAAS,0BAAf;;AAEAA,OAAOC,GAAP,CAAW,yBAAX,mGAAsC,iBAAMC,GAAN;AAC9BC,iBAD8B,GACtB,8BADsB;AAE9BD,kBAAIE,MAAJ,CAAW,OAAX,EAAoB,EAAED,YAAF,EAApB,CAF8B,qEAAtC;;;AAKA,IAAME,aAAa,SAAbA,UAAa,GAAM;AACvB,MAAIC,YAAY,4BAAgBA,SAAhC;AACAA,YAAUC,GAAV,CAAc,gBAAQ;AACpB;AACAP,WAAOQ,KAAKC,IAAL,CAAUC,WAAV,EAAP,EAAgCF,KAAKG,GAArC,EAA0C,eAAO;AAC/CT,UAAIU,IAAJ,GAAW;AACT,eADS;AAET,aAAOJ,KAAKJ,MAAZ,KAAuB,UAAvB,GAAoCI,KAAKJ,MAAL,EAApC,GAAoDI,KAAKJ,MAFhD,CAAX;;AAID,KALD;AAMD,GARD;AASD,CAXD;;AAaAC;;AAEAQ,aAAGC,SAAH,CAAaC,eAAKC,IAAL,CAAUC,QAAQC,GAAR,EAAV,EAAyB,UAAzB,CAAb,EAAmD,YAAM;AACvDb;AACD,CAFD,E;;AAIeL,M","file":"index.js","sourcesContent":["import fs from \"fs\";\nimport Router from \"koa-router\";\nimport getMockConfig from \"../utils/mockConfig\";\nimport encapsulationBody from \"../models/encapsulation\";\nimport path from \"path\";\n\nconst router = Router();\n\nrouter.get(\"/mock-service-dashboard\", async ctx => {\n  const title = \"mock-service-dashboard start\";\n  await ctx.render(\"index\", { title });\n});\n\nconst updateMock = () => {\n  let mockArray = getMockConfig().mockArray;\n  mockArray.map(item => {\n    // 转小写\n    router[item.type.toLowerCase()](item.url, ctx => {\n      ctx.body = encapsulationBody(\n        \"SUCCESS\",\n        typeof item.render === \"function\" ? item.render() : item.render\n      );\n    });\n  });\n};\n\nupdateMock();\n\nfs.watchFile(path.join(process.cwd(), \"_mock.js\"), () => {\n  updateMock();\n});\n\nexport default router;\n"]}