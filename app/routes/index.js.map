{"version":3,"sources":["../../src/routes/index.js"],"names":["router","get","ctx","title","render","mockObject","console","log","initMock","map","keys","type","toLowerCase","body","fs","watchFile","path","join","process","cwd"],"mappings":"2YAAA,wB;AACA,uC;AACA,iD;AACA,wD;AACA,4B;;AAEA,IAAMA,SAAS,0BAAf;;AAEAA,OAAOC,GAAP,CAAW,yBAAX,mGAAsC,iBAAMC,GAAN;AAC9BC,iBAD8B,GACtB,8BADsB;AAE9BD,kBAAIE,MAAJ,CAAW,OAAX,EAAoB,EAAED,YAAF,EAApB,CAF8B,qEAAtC;;;AAKA,IAAIE,aAAa,4BAAgBA,UAAjC;;AAEAC,QAAQC,GAAR,CAAYF,UAAZ;;AAEA,IAAMG,WAAW,SAAXA,QAAW,GAAM;AACrB,sBAAYH,UAAZ,EAAwBI,GAAxB,CAA4B,gBAAQ;AAClC;AACAT,WAAOK,WAAWK,IAAX,EAAiBC,IAAjB,CAAsBC,WAAtB,EAAP,EAA4CF,IAA5C,EAAkD,eAAO;AACvDR,UAAIW,IAAJ,GAAW;AACT,eADS;AAET,aAAOR,WAAWK,IAAX,EAAiBN,MAAxB,KAAmC,UAAnC;AACIC,iBAAWK,IAAX,EAAiBN,MAAjB,EADJ;AAEIC,iBAAWK,IAAX,EAAiBN,MAJZ,CAAX;;AAMD,KAPD;AAQD,GAVD;AAWD,CAZD;;AAcAI;;AAEAM,aAAGC,SAAH,CAAaC,eAAKC,IAAL,CAAUC,QAAQC,GAAR,EAAV,EAAyB,UAAzB,CAAb,EAAmD,YAAM;AACvDd,eAAa,4BAAgBA,UAA7B;AACD,CAFD,E;;AAIeL,M","file":"index.js","sourcesContent":["import fs from \"fs\";\nimport Router from \"koa-router\";\nimport getMockConfig from \"../utils/mockConfig\";\nimport encapsulationBody from \"../models/encapsulation\";\nimport path from \"path\";\n\nconst router = Router();\n\nrouter.get(\"/mock-service-dashboard\", async ctx => {\n  const title = \"mock-service-dashboard start\";\n  await ctx.render(\"index\", { title });\n});\n\nlet mockObject = getMockConfig().mockObject;\n\nconsole.log(mockObject);\n\nconst initMock = () => {\n  Object.keys(mockObject).map(keys => {\n    // 转小写\n    router[mockObject[keys].type.toLowerCase()](keys, ctx => {\n      ctx.body = encapsulationBody(\n        \"SUCCESS\",\n        typeof mockObject[keys].render === \"function\"\n          ? mockObject[keys].render()\n          : mockObject[keys].render\n      );\n    });\n  });\n};\n\ninitMock();\n\nfs.watchFile(path.join(process.cwd(), \"_mock.js\"), () => {\n  mockObject = getMockConfig().mockObject;\n});\n\nexport default router;\n"]}